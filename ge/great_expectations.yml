# Great Expectations configuration for AWS S3 data sources
config_version: 3.0

# Data context configuration
datasources:
  s3_datasource:
    class_name: Datasource
    execution_engine:
      class_name: SparkDFExecutionEngine
      spark_config:
        "spark.sql.extensions": "io.delta.sql.DeltaSparkSessionExtension"
        "spark.sql.catalog.spark_catalog": "org.apache.spark.sql.delta.catalog.DeltaCatalog"
    data_connectors:
      runtime_data_connector:
        class_name: RuntimeDataConnector
        batch_identifiers:
          - default_identifier_name

# Stores configuration
stores:
  expectations_store:
    class_name: ExpectationsStore
    store_backend:
      class_name: TupleS3StoreBackend
      bucket: "${s3.logs_bucket}"
      prefix: "ge/expectations"
  
  validations_store:
    class_name: ValidationsStore
    store_backend:
      class_name: TupleS3StoreBackend
      bucket: "${s3.logs_bucket}"
      prefix: "ge/validations"
  
  evaluation_parameter_store:
    class_name: EvaluationParameterStore

# Data docs configuration
data_docs_sites:
  s3_site:
    class_name: SiteBuilder
    show_how_to_buttons: true
    store_backend:
      class_name: TupleS3StoreBackend
      bucket: "${s3.logs_bucket}"
      prefix: "ge/data_docs"
    site_index_builder:
      class_name: DefaultSiteIndexBuilder

# Validation operators
validation_operators:
  action_list_operator:
    class_name: ActionListValidationOperator
    action_list:
      - name: store_validation_result
        action:
          class_name: StoreValidationResultAction
      - name: store_evaluation_params
        action:
          class_name: StoreEvaluationParametersAction
      - name: update_data_docs
        action:
          class_name: UpdateDataDocsAction

# Notebooks configuration
notebooks:
  pandas: null
  spark: null
  sql: null

# Concurrency configuration
concurrency:
  enabled: false
