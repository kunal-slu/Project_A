# Local Development Configuration
# Single source of truth for local pipeline execution

env: local
cloud: local

# AWS Configuration
aws:
  region: us-east-1
  lake_bucket: my-etl-lake-demo
  code_bucket: my-etl-code-demo
  glue_catalog_db: bronze  # Used in register_glue_tables

# Redshift Configuration (disabled for local)
redshift:
  enabled: false  # Local should NOT try COPY
  database: dev
  schema: public
  iam_role: ""  # Not used in local

# Snowflake Configuration (disabled for local)
snowflake:
  enabled: false
  warehouse: ""
  database: ""
  schema: ""

# Unified Paths - Single Source of Truth
# Use lake:// prefix that resolves to actual storage
paths:
  bronze: lake://bronze   # Resolves to s3:// in prod, data/lakehouse_delta/bronze in local
  silver: lake://silver
  gold: lake://gold

# DQ Configuration
dq:
  config_file: config/dq.yaml
  enabled: true
  strict_mode: false  # More lenient for local dev

# Lineage Configuration
lineage:
  config_file: config/lineage.yaml
  enabled: false  # Disable lineage in local for speed

# Spark Runtime Configuration
spark:
  app_name: pyspark_interview_project_local
  master: local[*]
  shuffle_partitions: 200
  enable_aqe: true
  driver_memory: 2g
  executor_memory: 4g

# Storage Configuration
storage:
  warehouse: data/lakehouse_delta
  format: delta  # delta | iceberg | parquet
  catalog: glue_catalog

# Data Lake Paths (derived from paths above)
data_lake:
  bucket: null
  state_prefix: _state
  bronze_path: data/lakehouse_delta/bronze
  silver_path: data/lakehouse_delta/silver
  gold_path: data/lakehouse_delta/gold
  dq_results_path: data/lakehouse_delta/_dq_results

# Local source file paths (for local testing)
sources:
  snowflake_orders: data/input_data/snowflake_orders_100000.csv
  redshift_behavior: data/input_data/redshift_customer_behavior_50000.csv
  fx_rates: data/input_data/fx_rates_historical_730_days.csv
  crm_accounts: data/input_data/accounts.csv
  crm_contacts: data/input_data/contacts.csv
  crm_opportunities: data/input_data/opportunities.csv
